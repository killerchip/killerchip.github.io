<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Exploring Code Universe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Exploring code universe. This is my experencie and notes of this exploration. Coding examples, best practices, recipes, tutorial and more...">
<meta property="og:type" content="website">
<meta property="og:title" content="Exploring Code Universe">
<meta property="og:url" content="http://killerchip.net/index.html">
<meta property="og:site_name" content="Exploring Code Universe">
<meta property="og:description" content="Exploring code universe. This is my experencie and notes of this exploration. Coding examples, best practices, recipes, tutorial and more...">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Exploring Code Universe">
<meta name="twitter:description" content="Exploring code universe. This is my experencie and notes of this exploration. Coding examples, best practices, recipes, tutorial and more...">
  
    <link rel="alternate" href="/atom.xml" title="Exploring Code Universe" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Exploring Code Universe</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Coding examples, best practices, recipes, tutorial and more...</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://killerchip.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-20191005-kcv-project" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/05/20191005-kcv-project/" class="article-date">
  <time datetime="2019-10-05T14:59:01.000Z" itemprop="datePublished">2019-10-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Activity/">Activity</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/05/20191005-kcv-project/">kCV - A React Native project - My CV as Mobile App</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <table><br><tr><br><td><br><img src="2019/10/05/20191005-kcv-project/home.png" alt="Home Page"><br></td><br><td><br><img src="2019/10/05/20191005-kcv-project/info.png" alt="Info Page"><br></td><br><td><br><img src="2019/10/05/20191005-kcv-project/certificate-details.png" alt="Certificate Details"><br></td><br></tr><br></table>

<p>Here’s a React-Native pet project I created as part of my CS50M certification. My Curriculum-Vitae as an App.</p>
<p>Currently you can find it in <a href="https://play.google.com/apps/testing/net.killerchip.kcv" target="_blank" rel="noopener">Google Play Store as Open beta</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/10/05/20191005-kcv-project/" data-id="ck1dp35cx00ai29vht55n83yz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pet-project/">pet-project</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react-native</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20191029-redux-async" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/29/20191029-redux-async/" class="article-date">
  <time datetime="2019-09-29T18:25:49.000Z" itemprop="datePublished">2019-09-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/react/">react</a>►<a class="article-category-link" href="/categories/react/react-native/">react-native</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/29/20191029-redux-async/">Handling Asynchronous fetching of data with Redux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>This article is a quick explanation and guide on how to use <code>redux</code> with async functions. Most common case is fetching data from remote source (eg. an API on the internet).</em></p>
<p>A full working example can be found here:<br><a href="https://snack.expo.io/@killerchip/redux-async" target="_blank" rel="noopener">https://snack.expo.io/@killerchip/redux-async</a></p>
<p>The example is build with React-Native, but the core concepts are exactly the same for web.</p>
<h2 id="What-we-know-so-far"><a href="#What-we-know-so-far" class="headerlink" title="What we know so far"></a>What we know so far</h2><p>Up to now you should be familiar with the classic <code>redux</code> model. In short:</p>
<ul>
<li>A state is stored centrally in a <code>store</code>.</li>
<li>The UI subscribes to state via the <code>connect</code> HOC from <code>react-redux</code>. It renders and re-renders, following changes in the state.</li>
<li>State changes are launched with the help of <em>action-creators</em>. An <em>action creator</em> function actually return an <em>action-object</em>, which has at least the <code>type</code> property.</li>
<li>The <em>action-object</em> is passed to <code>redux</code>‘s <code>dispatch</code> function, which eventually passes it to the <code>reducer</code> function, we define.</li>
<li>The <code>reducer</code> function composes and returns a new <em>state</em>, based on the received <em>action-object</em>.</li>
<li>The returned <em>state</em> is becoming new <em>state</em> in the <code>store</code>.</li>
<li>And the changes are propagated to UI parts that have subscribed to it.</li>
<li>And the story goes on…</li>
</ul>
<h2 id="Handling-Asychronous-operations-with-synchronous-actions"><a href="#Handling-Asychronous-operations-with-synchronous-actions" class="headerlink" title="Handling Asychronous operations with synchronous actions"></a>Handling Asychronous operations with synchronous actions</h2><p>Let’s keep it simple. Imagine we have a simple app, fetching popular cat names from the internet. The app typically:</p>
<ul>
<li>Display a list of fetched cat names.</li>
<li>Display a message, icon, or in general a component when it is actually fetching data from the internet.</li>
<li>If the cat names are fetched OK, then we display them.</li>
<li>If the fetch operation failed for some reason, display the error message.</li>
</ul>
<p>So, for a simple list of cat names, we probably need the following <em>state</em> form:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const initialState = &#123;</span><br><span class="line">    data: null,</span><br><span class="line">    isFetching: false,</span><br><span class="line">    error: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>data</code> holds the latest cat names fetched from the internet</li>
<li><code>isFetching</code> is indicating whether a fetch operation is in progress.</li>
<li><code>error</code> holds the error object from our last fetch operation, if it failed. If not, then <code>error</code> is <code>null</code>.</li>
</ul>
<p>The above state should be enough to allow our UI display the information as requested above.</p>
<p>But launching a single fetch operation requires many changes in our state. Additonally these changes are occuring <strong>asynchronously.</strong><br>Let’s follow the chain of events…</p>
<p><em>A fetch operation is lauched:</em> The state updates to:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    isFetching: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><em>Case 1: The fetch operation succeeds and returns <code>newData</code>:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data: newData,</span><br><span class="line">    isFetching: false,</span><br><span class="line">    error: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><em>Case 2: The fetch operation fails with an <code>error</code> object:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    data: null, // or we may choose to keep the old data from previoius fetch.</span><br><span class="line">    isFetching: false,</span><br><span class="line">    error: error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>So we need the corresponding synchronous <em>action-objects</em> and their <em>action-creators</em>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">export const CAT_NAMES = &#123;</span><br><span class="line">  START_FETCH: &quot;CAT_NAMES_START_FETCH&quot;,</span><br><span class="line">  FAIL_FETCH: &quot;CAT_NAMES_FAIL_FETCH&quot;,</span><br><span class="line">  FINISH_FETCH: &quot;CAT_NAME_FINISH_FETCH&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const startFetchCatNames = () =&gt; (&#123;</span><br><span class="line">  type: CAT_NAMES.START_FETCH</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const failFetchCatNames = error =&gt; (&#123;</span><br><span class="line">  type: CAT_NAMES.FAIL_FETCH,</span><br><span class="line">  payload: error</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const finishFetchCatNames = data =&gt; (&#123;</span><br><span class="line">  type: CAT_NAMES.FINISH_FETCH,</span><br><span class="line">  payload: data</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>And a <code>reducer</code> function that changes the state accordingly:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const reducer = (state = initialState, action) =&gt; &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case CAT_NAMES.START_FETCH:</span><br><span class="line">      return &#123; ...state, isFetching: true &#125;;</span><br><span class="line">    case CAT_NAMES.FINISH_FETCH:</span><br><span class="line">      return &#123; isFetching: false, data: action.payload, error: null &#125;;</span><br><span class="line">    case CAT_NAMES.FAIL_FETCH:</span><br><span class="line">      return &#123; ...state, isFetching: false, error: action.payload &#125;;</span><br><span class="line">    default:</span><br><span class="line">      return state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Now each time we wish to launch a new fetch action, we actually have to perform the asynchronous logic in a separate function that dispatches separate actions.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import store from &apos;./store.js&apos; // or whatever module exports your store</span><br><span class="line"></span><br><span class="line">function fetchCatNames = async url =&gt; &#123;</span><br><span class="line">    const &#123;dispatch&#125; = store;</span><br><span class="line"></span><br><span class="line">    dispatch(startFetchCatNames()); // indicate that fetch has started</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        const data = await fetchData(url);  // fetching data</span><br><span class="line">        dispatch(finishFetchCatNames(data)); // handle success</span><br><span class="line">    &#125; catch (error) &#123;</span><br><span class="line">        dispatch(failFetchCatNames(error)); // handle failure</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Well this is a bit out of our <code>react-redux</code> pattern. We access the store directly. And can get things a bit more complicated. Wouldn’t be nice if our function could be return by an <em>action-creator</em> and be injected in our <code>redux</code> chain of action-processing seamlessly with the other good-old, <em>action objects</em>?</p>
<h2 id="redux-thunk-middleware"><a href="#redux-thunk-middleware" class="headerlink" title="redux-thunk middleware"></a><code>redux-thunk</code> middleware</h2><p>Well, a more elegant approach to this, is the <code>redux-thunk</code> <em>middleware</em>.!</p>
<p>Wow! A lot of terms. Let’s explain:</p>
<p><strong>Middleware:</strong> <code>redux</code> allows for middleware plugins. This means that each action that is dispatched, before is delivered to <code>redux</code>‘s reducer, can be handed-over to 3rd party tools. These can modify actions, tigger side actions, or even prevent redux actions from executing.</p>
<p><strong><code>redux-thunk</code>:</strong> This is a specific plugin that can handle asynchronous functions.<br>Actually <code>redux-thunk</code> will receive an action before it is handed-over to <code>reducer</code>. It will check the type of the action. If the action is a function, then it will execute it, and stop further proecessing. If it is an object, then it will pass it on untouched, and be done with it.</p>
<p>So we can pass our <em>asynchronous</em> function as an action, and have it launched automatically by <code>redux-thunk</code>. The actual function will then trigger a series of <code>synchronous</code> events based on the progress of our fetch operation.</p>
<h2 id="Creating-a-thunk"><a href="#Creating-a-thunk" class="headerlink" title="Creating a thunk"></a>Creating a <em>thunk</em></h2><p>A <em>thunk</em> actually is a function that is returned from another function. So it defers execution for later. </p>
<p>A <em>redux-thunk</em> is a function that accepts <code>dispatch</code> as a parameter and uses it as it wishes to dispatch actual actions.<br>So in our case, our <code>fetchCatNames</code> function as <em>thunk</em> should be:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function fetchCatNames = dispatch =&gt; &#123;</span><br><span class="line">    // our rest of logic does not change...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>But what if we want to pass our own parameters to our <em>thunk</em>? Then we create our function (a <em>thunk</em>) via an action creator. So our special <em>action-creator</em> returns a function and not a <code>redux</code> <em>action-object</em>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export const fetchCatNames = url =&gt; async dispatch =&gt; &#123; // &lt;== notice the two fat-arrows</span><br><span class="line">  dispatch(startFetchCatNames());</span><br><span class="line"></span><br><span class="line">  try &#123;</span><br><span class="line">    const data = await fetchData(url);</span><br><span class="line">    dispatch(finishFetchCatNames(data));</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    dispatch(failFetchCatNames(error));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Actually we need to create our <em>thunk</em> via an <em>action-creator</em> also because it will be used by <code>react-redux</code> exactly in the same way as our typical synchronous <em>action-creators</em>. It’s just that it returns a function (<em>thunk</em>) instead of an object, and it will be handled by <code>redux-thunk</code> middleware.</p>
<p>So when one or more components, need to call our asynchronous action, we pass its action creator the same way as we would with the our classic <em>action-creators</em>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class ButtonBar extends React.PureComponent &#123;</span><br><span class="line">  fetchCatName = () =&gt; this.props.fetchCatNames(&apos;data&apos;); // &lt;== calling action creator is equivalent to passing it to dispatch. See below</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View style=&#123;styles.view&#125;&gt;</span><br><span class="line">        &lt;Button onPress=&#123;this.fetchCatName&#125;&gt;Fetch Names&lt;/Button&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mapActionsToProps = &#123;</span><br><span class="line">  fetchCatNames, // &lt;== we pass our action creator to the component, here</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default connect(</span><br><span class="line">  null,</span><br><span class="line">  mapActionsToProps</span><br><span class="line">)(ButtonBar);</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Note: In the above example we used the <code>mapActionsToProps</code> object. This is a form of <code>react-redux</code> that allows us directly to call our _action_creators_. In the background our action creators will be passed to the <code>dispatch</code> function as argument. <a href="https://react-redux.js.org/using-react-redux/connect-mapdispatch" target="_blank" rel="noopener">More details here</a>.</p>
</blockquote>
<blockquote>
<p>Note: we said that our <em>thunk</em> receives <code>dispatch</code> as parameter. Well, it actually can also receive <code>getState</code> function, in case it needs the current state in its logic. <a href="https://daveceddia.com/what-is-a-thunk/" target="_blank" rel="noopener">See more details here</a>.</p>
</blockquote>
<h2 id="Applying-the-middleware"><a href="#Applying-the-middleware" class="headerlink" title="Applying the middleware"></a>Applying the middleware</h2><p>This is an easy step. We just apply the middleware using <code>applyMiddleware</code> function when we define our <code>store</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers, applyMiddleware, createStore &#125; from &quot;redux&quot;;</span><br><span class="line">import thunk from &quot;redux-thunk&quot;;</span><br><span class="line">import catNames from &quot;./reducer&quot;;</span><br><span class="line"></span><br><span class="line">const reducer = combineReducers(&#123;</span><br><span class="line">  catNames</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default createStore(</span><br><span class="line">    reducer,</span><br><span class="line">    applyMiddleware(thunk) // &lt;== Applying redux-thunk middleware</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<h2 id="Summary-Cheatsheet"><a href="#Summary-Cheatsheet" class="headerlink" title="Summary / Cheatsheet:"></a>Summary / Cheatsheet:</h2><p>So in order to handle asynchronous operations with <code>redux</code> we need to define special functions that return other functions (<em>thunks</em>).</p>
<p><strong>Step 1</strong>: we define the actions and state as normal. They are synchronous actions:</p>
<p><em>actions.js</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">export const CAT_NAMES = &#123;</span><br><span class="line">  START_FETCH: &quot;CAT_NAMES_START_FETCH&quot;,</span><br><span class="line">  FAIL_FETCH: &quot;CAT_NAMES_FAIL_FETCH&quot;,</span><br><span class="line">  FINISH_FETCH: &quot;CAT_NAME_FINISH_FETCH&quot;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const startFetchCatNames = () =&gt; (&#123;</span><br><span class="line">  type: CAT_NAMES.START_FETCH</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const failFetchCatNames = error =&gt; (&#123;</span><br><span class="line">  type: CAT_NAMES.FAIL_FETCH,</span><br><span class="line">  payload: error</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const finishFetchCatNames = data =&gt; (&#123;</span><br><span class="line">  type: CAT_NAMES.FINISH_FETCH,</span><br><span class="line">  payload: data</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><em>reduxer.js</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123; CAT_NAMES &#125; from &quot;./actions&quot;;</span><br><span class="line"></span><br><span class="line">const initialState = &#123;</span><br><span class="line">  data: null,</span><br><span class="line">  isFetching: false,</span><br><span class="line">  error: null</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const reducer = (state = initialState, action) =&gt; &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case CAT_NAMES.START_FETCH:</span><br><span class="line">      return &#123; ...state, isFetching: true &#125;;</span><br><span class="line">    case CAT_NAMES.FINISH_FETCH:</span><br><span class="line">      return &#123; isFetching: false, data: action.payload, error: null &#125;;</span><br><span class="line">    case CAT_NAMES.FAIL_FETCH:</span><br><span class="line">      return &#123; ...state, isFetching: false, error: action.payload &#125;;</span><br><span class="line">    default:</span><br><span class="line">      return state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default reducer;</span><br></pre></td></tr></table></figure></p>
<p><strong>Step 2:</strong> we define our asynchronous action creator that handles the asynchronous operations.</p>
<p><em>actions.js</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fetchData &#125; from &apos;../api/client&apos;;</span><br><span class="line"></span><br><span class="line">export const fetchCatNames = url =&gt; async dispatch =&gt; &#123;</span><br><span class="line">  dispatch(startFetchCatNames());</span><br><span class="line"></span><br><span class="line">  try &#123;</span><br><span class="line">    const data = await fetchData(url);</span><br><span class="line">    dispatch(finishFetchCatNames(data));</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    dispatch(failFetchCatNames(error));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong>Step 3:</strong> When defining the store, we apply the <code>redux-thunk</code> middleware.</p>
<p><em>store.js</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers, applyMiddleware, createStore &#125; from &quot;redux&quot;;</span><br><span class="line">import thunk from &quot;redux-thunk&quot;;</span><br><span class="line">import catNames from &quot;./reducer&quot;;</span><br><span class="line"></span><br><span class="line">const reducer = combineReducers(&#123;</span><br><span class="line">  catNames</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default createStore(reducer, applyMiddleware(thunk));</span><br></pre></td></tr></table></figure></p>
<p><strong>Step 4:</strong> we bind our action creator normally via the <code>connect</code> HOC of <code>react-redux</code>.</p>
<p><em>ButtonBar.js</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; View, StyleSheet &#125; from &apos;react-native&apos;;</span><br><span class="line">import &#123; Button &#125; from &apos;react-native-paper&apos;;</span><br><span class="line">import &#123; connect &#125; from &apos;react-redux&apos;;</span><br><span class="line">import &#123; fetchCatNames &#125; from &apos;../redux/actions&apos;;</span><br><span class="line"></span><br><span class="line">class ButtonBar extends React.PureComponent &#123;</span><br><span class="line">  fetchCatName = () =&gt; this.props.fetchCatNames(&apos;data&apos;);</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View style=&#123;styles.view&#125;&gt;</span><br><span class="line">        &lt;Button onPress=&#123;this.fetchCatName&#125;&gt;Fetch Names&lt;/Button&gt;</span><br><span class="line">      &lt;/View&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mapActionsToProps = &#123; </span><br><span class="line">  fetchCatNames, // &lt;== action-creator as prop function</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default connect(</span><br><span class="line">  null,</span><br><span class="line">  mapActionsToProps</span><br><span class="line">)(ButtonBar);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/09/29/20191029-redux-async/" data-id="ck1dp35e000b829vh4ovoipp3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/async/">async</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react-native</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redux/">redux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20190927-harvard-rn-cert" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/27/20190927-harvard-rn-cert/" class="article-date">
  <time datetime="2019-09-27T19:55:32.000Z" itemprop="datePublished">2019-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Activity/">Activity</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/27/20190927-harvard-rn-cert/">CS50 Mobile App Dev with React Native (Harvard) certification</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <img src="/2019/09/27/20190927-harvard-rn-cert/CS50M.png" title="CS50M Certification">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/09/27/20190927-harvard-rn-cert/" data-id="ck1dp35cl00a629vh347t3k07" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React-Native/">React-Native</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-07-23-rn-redux-ts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/23/2019-07-23-rn-redux-ts/" class="article-date">
  <time datetime="2019-07-23T08:30:49.000Z" itemprop="datePublished">2019-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/React-Native/">React-Native</a>►<a class="article-category-link" href="/categories/React-Native/Redux/">Redux</a>►<a class="article-category-link" href="/categories/React-Native/Redux/Typescript/">Typescript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/23/2019-07-23-rn-redux-ts/">React-Redux-Typescript guide</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://github.com/killerchip/react-native-cheatsheet/blob/master/react-redux-ts/rn-redux-ts.png?raw=true" alt></p>
<p><em>React</em> and <em>React-Native</em> are powerfull and popular libraries allowing to build web-apps and mobile-apps, using Javascript. And they almost always are used with <em>Redux</em> state-management library, that allows managing state globally in the app from a central point. Microsoft’s <em>Typescript</em> on the other hand is a superset language of Javascript, that brings the benefits of typing-languages to it. </p>
<p>Combine these technologies (<em>React-Native</em>, <em>Redux</em>, <em>Typescript</em>) you have a powerfull toolbox for building mobile-apps.</p>
<p>The following is an example-based guide/checklist on how to use the <em>React-Native</em> (applies to <em>React</em> also) <em>Typescript</em>, and <em>Redux</em> altogether, to build and consume your states with your components. It assumes that you are already familiar with <a href="https://facebook.github.io/react-native/docs/getting-started" target="_blank" rel="noopener">React-Native</a>, <a href="https://redux.js.org/introduction/getting-started" target="_blank" rel="noopener">Redux</a>, and <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">Typescript language</a>. </p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><p>The following topics are covered:</p>
<ul>
<li>Preparing the app</li>
<li>Creating the state</li>
<li>Writing Actions</li>
<li>Writing the store</li>
<li>Consuming the store</li>
<li>Typed Components</li>
<li>Using styles</li>
</ul>
<h2 id="Preparing-the-App"><a href="#Preparing-the-App" class="headerlink" title="Preparing the App"></a>Preparing the App</h2><h3 id="Initialize-React-Native-Typesscript-project"><a href="#Initialize-React-Native-Typesscript-project" class="headerlink" title="Initialize React-Native Typesscript project"></a>Initialize React-Native Typesscript project</h3><p>To initialize a RN-Typescript project follow the instrucitons of this article:</p>
<p><a href="http://killerchip.net/2019/07/19/2019-07-19-rn-ts-lint/">React-Typescript with ESlint and Prettier</a></p>
<p>Apart from setting up the project, it also guides you to setup <em>ESlint</em> and <em>Prettier</em> for better code quality control.</p>
<h3 id="Install-Redux"><a href="#Install-Redux" class="headerlink" title="Install Redux"></a>Install Redux</h3><p>Install the following packages for <em>Redux</em>, <em>React-Redux</em> with <em>Typescript</em> flavor.</p>
<p>In the root folder your projec:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install redux react-redux</span><br><span class="line">npm install --save-dev redux-tools</span><br><span class="line">npm install @types/react-redux -D</span><br></pre></td></tr></table></figure>
<h3 id="Folder-Layout"><a href="#Folder-Layout" class="headerlink" title="Folder Layout"></a>Folder Layout</h3><p>For my <em>Redux</em> state management I like to use the following folder structure:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">state/</span><br><span class="line">    types.ts    // interfaces common to all domains</span><br><span class="line">    store.ts    // redux store</span><br><span class="line">    &lt;domain&gt;/</span><br><span class="line">        actions.ts      // actions specific to domain</span><br><span class="line">        reducer.ts      // the reducer of the domain</span><br></pre></td></tr></table></figure>
<p>All types are gathered in the <code>types.ts</code> file. It can be also a folder, but in general I find it a good way to have types in one place, for other parts of the app easily access them.</p>
<p>The <code>store.ts</code> will export the one <strong>combined</strong> state of various domain sub-states.</p>
<p>Then for each sub-state there is a correspondingly-named folder. In this folder the actions and reducer each sub-state are stored.</p>
<h2 id="Creating-the-State"><a href="#Creating-the-State" class="headerlink" title="Creating the State"></a>Creating the State</h2><h3 id="Clarify-the-State-and-Actions"><a href="#Clarify-the-State-and-Actions" class="headerlink" title="Clarify the State and Actions"></a>Clarify the State and Actions</h3><p>First sit back and think of what your App state will be. Let’s go for a simple example of a <em>user-list</em> of some sort.</p>
<p>Our <em>user-list</em> will have the following form:</p>
<p><strong>user-list</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        name: John;</span><br><span class="line">        surname: Doe;</span><br><span class="line">        age: 32</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        // next user here, etc.</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>Then we need to think of the actions that will manage the state.</p>
<p>For our <em>user-list</em> example, let’s assume we need the following actions:</p>
<p><strong>user-list actions</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Adding a new user in the list</span><br><span class="line">addUser(name, surname, age);</span><br><span class="line"></span><br><span class="line">// Updating the data of an existing user in the list</span><br><span class="line">updateUser(index, userData);</span><br><span class="line"></span><br><span class="line">// Remove a user from the list</span><br><span class="line">removeUser(index);</span><br></pre></td></tr></table></figure></p>
<h3 id="Create-types"><a href="#Create-types" class="headerlink" title="Create types"></a>Create types</h3><p>Since we have our state and actions clarified we can now start creating the types that will be used to define state and actions later-on.</p>
<p><strong>State Components Types</strong></p>
<p>Our state will have sub-objects. We can start define their types. In our example we need to define the <code>User</code> type.</p>
<p><em>state/types.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export type User = &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    surname: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>State Type</strong></p>
<p>Since we defined the state components types we should now define our whole state type.</p>
<p>In our case things are simple:</p>
<p><em>state/types.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export type UserListState = User[];</span><br></pre></td></tr></table></figure></p>
<p><strong>Define actions Enum</strong></p>
<p>Now we should start bulding the interfaces of our actions. First define a <em>Typescript</em> <code>enum</code> for the actual action types.</p>
<p><em>state/user-list/actions.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export enum USER_LIST_ACTION_TYPES &#123;</span><br><span class="line">    ADD_USER: &apos;USER_LIST/ADD_USER&apos;,</span><br><span class="line">    REMOVE_USER: &apos;USER_LIST/REMOVE_USER&apos;,</span><br><span class="line">    UPDATE_USER: &apos;USER_LIST/UPDATE_USER&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Define action types</strong></p>
<p>Remember that each redux _action_creator_ returns a specific action object to pass-on to reducers. These action objects have specific format.<br>With <em>Typescript</em> we strongly type them.</p>
<p><em>types.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export type AddUserAction = &#123;</span><br><span class="line">    type: string;</span><br><span class="line">    userData: User;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export type UpdateUserAction = &#123;</span><br><span class="line">    type: string;</span><br><span class="line">    index: number;</span><br><span class="line">    userData: User;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export type RemoveUserAction = &#123;</span><br><span class="line">    type: string;</span><br><span class="line">    index: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>And always define a <code>union</code> type. We are going to need it with our reducer:</p>
<p><em>state/types.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export type UserListAction = AddUserAction | UpdateUserAction | RemoveUserAction;</span><br></pre></td></tr></table></figure></p>
<h2 id="Writing-Actions"><a href="#Writing-Actions" class="headerlink" title="Writing Actions"></a>Writing Actions</h2><h3 id="Action-Creators"><a href="#Action-Creators" class="headerlink" title="Action Creators"></a>Action Creators</h3><p>Next we can start writing our action creators.</p>
<p>Here’s the example of our <code>addUser</code> creator.</p>
<p><em>state/user-list/actions.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export const addUser = (name: string, surename: string, age: number): AddUserAction =&gt; (&#123;</span><br><span class="line">    type: USER_LIST_ACTION_TYPES.ADD_USER,</span><br><span class="line">    userData: &#123;</span><br><span class="line">        name,</span><br><span class="line">        surename,</span><br><span class="line">        age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>You can continue and define the rest of the actions accordingly.</p>
<h3 id="Write-the-reducer"><a href="#Write-the-reducer" class="headerlink" title="Write the reducer"></a>Write the reducer</h3><p>Next we can move on with writing the redux reducer:</p>
<p><strong>define an initial state</strong></p>
<p><em>state/user-list/reducer.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const initialState: UserListState = [];</span><br></pre></td></tr></table></figure></p>
<p><strong>create a dummy reducer</strong></p>
<p>First we write a dummy reducer. A dummy reducer does nothing more than return the state that is receiving. It will be our base for adding actions immediately after:</p>
<p><em>state/user-list/reducer.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const userList = (</span><br><span class="line">    state: UserListState = initialState,</span><br><span class="line">    action: UserListAction</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">    switch (action.type)&#123;</span><br><span class="line">        default:</span><br><span class="line">            return newState;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Pay attention to the type of <code>action</code> parameter. It is the <code>union</code> of types of each individual actions.</p>
<p><strong>add actions to reducers</strong><br>Next we can start handling actions per <code>action.type</code>:</p>
<p><em>state/user-list/reducer.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const userList = (</span><br><span class="line">    state: UserListState = initialState,</span><br><span class="line">    action: UserListAction</span><br><span class="line">) =&gt; &#123;</span><br><span class="line">    const newState: UserListState = deepClone(state); // a deep-cloning function</span><br><span class="line"></span><br><span class="line">    switch (action.type)&#123;</span><br><span class="line">        case USER_LIST_ACTION_TYPES.ADD_USER:</span><br><span class="line">            // pay attention to type-casting on action</span><br><span class="line">            const &#123; name, surename, age &#125; = &lt;AddUserAction&gt;action;</span><br><span class="line">            return [...newState, &#123; name, surename, age &#125;];</span><br><span class="line">            </span><br><span class="line">            // define rest of actions here</span><br><span class="line"></span><br><span class="line">        default:</span><br><span class="line">            return state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Pay attention in line<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123; name, surename, age &#125; = &lt;AddUserAction&gt;action;</span><br></pre></td></tr></table></figure></p>
<p>Because our actions are of different shape, most times we have to <em>type-cast</em> them to use one of their particular forms.</p>
<h2 id="Writing-the-store"><a href="#Writing-the-store" class="headerlink" title="Writing the store"></a>Writing the store</h2><p>Now we can define our global app state store. Typically our entire app state is comprised of our sub-states (like <em>user-list</em> sub-state in our example). We will use <em>reac-redux</em> <code>combineReducers</code> to do it.</p>
<h3 id="define-AppState-type"><a href="#define-AppState-type" class="headerlink" title="define AppState type"></a>define AppState type</h3><p>First we define our entire App’s state type. This is a combination of our sub-states.</p>
<p><em>state/types.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export type AppState = &#123;</span><br><span class="line">    userList: UserListState,</span><br><span class="line">    // add future state slices here</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="create-store-combineReducers"><a href="#create-store-combineReducers" class="headerlink" title="create store / combineReducers"></a>create store / combineReducers</h3><p>Then we create that store for our whole app state. We export it to be consumed by the rest of our app.</p>
<p><em>state/store.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers &#125; from &apos;react-redux&apos;;</span><br><span class="line">import &#123; AppState &#125; from &apos;./types&apos;;</span><br><span class="line"></span><br><span class="line">export default store.create(</span><br><span class="line">    comabineReducers&lt;AppState&gt;(</span><br><span class="line">        userList,   // this is the user-list reducer</span><br><span class="line">        // other sub-states reducers go here</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<h3 id="Write-tests-for-reducers"><a href="#Write-tests-for-reducers" class="headerlink" title="Write tests for reducers"></a>Write tests for reducers</h3><p>We will not go into details here. But as a note, you might want to write tests for your reducers.</p>
<p>The test cases should be:</p>
<ul>
<li>Reducer returns initial state when no state is given.</li>
<li>Reducer returns the same state when an irrelative action is provided to it.</li>
<li>At least one test per action.</li>
</ul>
<h2 id="Consuming-the-store"><a href="#Consuming-the-store" class="headerlink" title="Consuming the store"></a>Consuming the store</h2><h3 id="Provide-the-store"><a href="#Provide-the-store" class="headerlink" title="Provide the store"></a>Provide the store</h3><p>Once we have our store defined we can pass it down to our App, via <em>React-Redux</em> <code>Provider</code> component.<br>Of course we have to import our store from the <code>state</code> folder.</p>
<p><em>App.tsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import store from &apos;./state/store&apos;;</span><br><span class="line"></span><br><span class="line">const App = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">            &lt;Fragment&gt;</span><br><span class="line">                &#123;/* Your app magic goes here. */&#125;</span><br><span class="line">            &lt;/Fragment&gt;</span><br><span class="line">        &lt;/Provider&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="Smart-components"><a href="#Smart-components" class="headerlink" title="Smart components"></a>Smart components</h3><p><em>Smart</em> components are the ones that consume the state and use <code>dispatch</code> action of the store to dispatch actions. So when you want to consume your state, first define the smart component using <em>React-Redux</em> <code>connect</code> to wrap a <em>presententional</em> component.</p>
<p><em>ui/components/user-list/user-list.tsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const UserList = connect(</span><br><span class="line">    mapStateToProps,</span><br><span class="line">    mapDipatchToProps</span><br><span class="line">)(UserListBase);</span><br><span class="line"></span><br><span class="line">export default UserList;</span><br></pre></td></tr></table></figure></p>
<p>You’ll notice that in general I prefer to use a ‘public’ component name for the smart component (e.g. <code>UserList</code>) and use the extension <code>Base</code> for the internal presentational component. (e.g. <code>UserListBase</code>).</p>
<p>Then create the <code>mapStateToProps</code> method to feed your component exactly the data needed from the state.</p>
<p><em>ui/components/user-list/user-list.tsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const mapStateToProps = (state: AppState) =&gt; (&#123;</span><br><span class="line">    users: state.userList</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Also you may create the <code>mapDispatchToProps</code> method, to send actions to the reducer.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Dispatch &#125; from &apos;react-redux&apos;;</span><br><span class="line"></span><br><span class="line">const mapDipatchToProps = (dispatch: Dispatch) =&gt; (&#123;</span><br><span class="line">    onAddUser: (name: string, surename: string, age: number) =&gt; &#123;</span><br><span class="line">        dispatch(addUser(name, surname, age));</span><br><span class="line">    &#125;,</span><br><span class="line">    // other callbacks go here...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Typed-Components"><a href="#Typed-Components" class="headerlink" title="Typed Components"></a>Typed Components</h2><h3 id="Types-for-Component-Props"><a href="#Types-for-Component-Props" class="headerlink" title="Types for Component Props"></a>Types for Component Props</h3><p>For components to work with Typescript we must type their properties first. We define both data properties and callback functions. For our example:</p>
<p><em>ui/components/user-list/user-list-base.tsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Props = &#123;</span><br><span class="line">    users: UserListState,</span><br><span class="line">    onAddUser: (name: string, surename: string; age: number) =&gt; void;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Presentational-Component-Funcational"><a href="#Presentational-Component-Funcational" class="headerlink" title="Presentational Component (Funcational)"></a>Presentational Component (Funcational)</h3><p>Then we use the Props type when we destructuring the props in the function:</p>
<p><em>ui/components/user-list/user-list-base.tsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const UserListBase = (&#123;</span><br><span class="line">    users,</span><br><span class="line">    onAddUser</span><br><span class="line">&#125;: Props) =&gt; &#123; /* your component here */ &#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="Presentational-Component-Class-based"><a href="#Presentational-Component-Class-based" class="headerlink" title="Presentational Component (Class based)"></a>Presentational Component (Class based)</h3><p>Defining a class-based component is similar. We pass the <code>Props</code> type in <code>Component</code> class:</p>
<p><em>ui/components/user-list/user-list-base.tsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class DiceEditorBaseComponent extends React.Component&lt;Props&gt; &#123;</span><br><span class="line">    /* define your Component class here */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Using-styles"><a href="#Using-styles" class="headerlink" title="Using styles"></a>Using styles</h2><p>Using styles with <em>Typescript</em> is similar as with plain <em>React</em>, since we let <em>Typescript</em> to automatically infer the types of styles.</p>
<p>I prefer having styles in their own files though:</p>
<p><em>ui/components/user-list/styles.ts</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; StyleSheet &#125; from &apos;react-native&apos;;</span><br><span class="line"></span><br><span class="line">export default StyleSheet.create(&#123;</span><br><span class="line">    list: &#123;</span><br><span class="line">        // your styles here...</span><br><span class="line">    &#125;,</span><br><span class="line">    listItem: &#123;</span><br><span class="line">        // your styles here...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/07/23/2019-07-23-rn-redux-ts/" data-id="ck1dp35ct00aa29vhdfac1fxt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react-native</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redux/">redux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typescript/">typescript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-07-19-rn-ts-lint" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/19/2019-07-19-rn-ts-lint/" class="article-date">
  <time datetime="2019-07-19T01:58:20.000Z" itemprop="datePublished">2019-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/react-native/">react-native</a>►<a class="article-category-link" href="/categories/react-native/typescript/">typescript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/19/2019-07-19-rn-ts-lint/">React-Native Typescript with ESLint and Prettier</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://github.com/killerchip/react-native-cheatsheet/raw/master/rn-typescript.png" alt></p>
<p>React Typescript is picking up speed, as typing offers a lot of benefits in a project.</p>
<p>The following is a walkthough on how to:</p>
<ul>
<li>Setup a <strong>React-Native Typescript</strong> project</li>
<li>Install and configure <strong>ESlint</strong> and <strong>Prettier</strong></li>
<li>How to configure ESLint and Prettier <strong>VSCode plugins</strong>.</li>
</ul>
<p>The linting rules proposed here are <code>@typescript-eslint/eslint-plugin</code> and <code>eslint-config-airbnb-typescript</code></p>
<p>Bear in mind that due to <a href="https://medium.com/palantir/tslint-in-2019-1a144c2317a9" target="_blank" rel="noopener">TSLint depreciation</a>, Typescript linting is now taken over by ESLint, and there’s work in progress.</p>
<h3 id="Contents"><a href="#Contents" class="headerlink" title="Contents:"></a>Contents:</h3><ol>
<li>Setup React-Native Typescript project</li>
<li>Install and configure <code>eslint</code> and <code>prettier</code></li>
<li>Setup scripts</li>
<li>Git hooking with <code>husky</code></li>
<li>Setup ESlint VSCode plugin.</li>
</ol>
<h2 id="Setup-React-Native-Typescript"><a href="#Setup-React-Native-Typescript" class="headerlink" title="Setup React-Native Typescript"></a>Setup React-Native Typescript</h2><p>You can <strong>setup</strong> a react-native typescript project with the cli:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">react-native init &lt;project-name&gt; --template typescript</span><br><span class="line">cd &lt;project-name&gt;</span><br></pre></td></tr></table></figure></p>
<p>Before <code>git init</code> your project make sure to add the following lines to <code>.gitignore</code> file:</p>
<p><strong>.gitignore</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># CocoaPods</span><br><span class="line">/ios/Pods/</span><br></pre></td></tr></table></figure></p>
<p>Then you can <code>git init</code> your project<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;project init&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="Install-and-configure-eslint-and-prettier"><a href="#Install-and-configure-eslint-and-prettier" class="headerlink" title="Install and configure eslint and prettier"></a>Install and configure <code>eslint</code> and <code>prettier</code></h2><p>The project comes already with <code>eslint</code> and <code>prettier</code> installed. We will add support for <code>react</code> but mainly for <code>typescript</code> and <code>airbnb</code>‘s proposal for typescript eslint.</p>
<p>So install the packages:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev eslint-plugin-react eslint-plugin-import eslint-plugin-jsx-a11y @typescript-eslint/eslint-plugin eslint-config-airbnb-typescript eslint-config-prettier</span><br></pre></td></tr></table></figure></p>
<p>And then configure <code>.eslintrc.js</code> to use these plugins:</p>
<p><strong>.eslintrc.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    root: true,</span><br><span class="line">    extends: [&apos;@react-native-community&apos;, &apos;airbnb-typescript&apos;, &apos;prettier&apos;, &apos;prettier/@typescript-eslint&apos;, &apos;prettier/react&apos;],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>In addition you can create a <code>.prettierrc</code> file to customize the prettier behavior to your liking. Here’s my personal favourite:</p>
<p><strong>.prettierrc</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;singleQuote&quot;: true,</span><br><span class="line">    &quot;trailingComma&quot;: &quot;none&quot;,</span><br><span class="line">    &quot;tabWidth&quot;: 4,</span><br><span class="line">    &quot;semi&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ADD the following in <code>excludes</code> section of <code>tsconfig.json</code> to suppress a typescript error in tests:</p>
<p><strong>.tsconfig.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;exclude&quot;: [</span><br><span class="line">    &quot;__tests__/**/*-test.ts&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h2 id="Setup-scripts"><a href="#Setup-scripts" class="headerlink" title="Setup scripts"></a>Setup scripts</h2><p>You should setup scripts in <code>package.json</code> so you can run those tools manually when needed.</p>
<p>Add a script for running <code>prettier</code> in <strong>WRITE</strong> mode. (Caution: It will change your files).</p>
<p><strong>package.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;script&quot;: &#123;</span><br><span class="line">    ...</span><br><span class="line">    &quot;prettier:write&quot;: &quot;npx prettier --write **/*.&#123;js,jsx,ts,tsx,json&#125; &amp;&amp; npx prettier --write *.&#123;js,jsx,ts,tsx,json&#125;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Also add as script for running <code>lint</code> on all files including <code>.ts</code> and <code>.tsx</code> ones:</p>
<p><strong>package.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;script&quot;: &#123;</span><br><span class="line">    ...</span><br><span class="line">    &quot;lint&quot;: &quot;tsc --noEmit &amp;&amp; eslint --ext .js,.jsx,.ts,.tsx ./&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Before proceeding it’s a good idea to commit your existing changes:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;eslint typescript prettier&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="Fix-the-existing-project"><a href="#Fix-the-existing-project" class="headerlink" title="Fix the existing project"></a>Fix the existing project</h3><p>Now you can run<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run prettier:write</span><br></pre></td></tr></table></figure></p>
<p>This command will re-format your project files according to the rules we just installed.</p>
<p>Then you can run <code>lint</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run lint</span><br></pre></td></tr></table></figure></p>
<p>You will see that eslint finds some issues. These must be corrected by hand. Once you fix those run again the commands:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run prettier:write</span><br><span class="line">npm run lint</span><br></pre></td></tr></table></figure>
<p>If no issue found, you can commit your changes:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;prettify project&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="Git-hooking-with-husky"><a href="#Git-hooking-with-husky" class="headerlink" title="Git hooking with husky"></a>Git hooking with <code>husky</code></h2><p>You do not want to run those commands manually, each time you commit. You should automate this process to run automatically each time you commit.</p>
<p>This can be done with <code>husky</code>. Also <code>pretty-quick</code> will help you to prettify only the files that you changed in this commit.</p>
<p>So install those packages:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev pretty-quick husky</span><br></pre></td></tr></table></figure></p>
<p>Then configure your <strong>package.json</strong> to enable husky pre-commit hook.</p>
<p><strong>package.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;husky&quot;: &#123;</span><br><span class="line">    &quot;hooks&quot;: &#123;</span><br><span class="line">    &quot;pre-commit&quot;: &quot;pretty-quick --staged &amp;&amp; npm run lint&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Now each time you commit, your changes will be prettified and checked by <code>eslint</code>. If issues are found, the commit will be blocked.</p>
<h2 id="VSCode-plugin-setup"><a href="#VSCode-plugin-setup" class="headerlink" title="VSCode plugin setup."></a>VSCode plugin setup.</h2><p>To be able to have the <code>eslint</code> and <code>prettier</code> information real-time in you VSCode Editor you should install the following plugins:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener">ESLint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener">Prettier</a></li>
</ul>
<p><code>ESLint</code> plugin needs a bit further configuration to work with typescript.</p>
<p>Open the VSCode settings and the following configuration snippet.</p>
<p><strong>settings.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint.validate&quot;: [</span><br><span class="line">    &quot;javascript&quot;,</span><br><span class="line">    &quot;javascriptreact&quot;,</span><br><span class="line">    &quot;typescript&quot;,</span><br><span class="line">    &quot;typescriptreact&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h3 id="Done"><a href="#Done" class="headerlink" title="Done"></a>Done</h3><p>That’s it. You can now write your code in React-native.<br>Happy coding!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/07/19/2019-07-19-rn-ts-lint/" data-id="ck1dp35a4002b29vhrwsex5ft" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eslint/">eslint</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/prettier/">prettier</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-native/">react-native</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typescript/">typescript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20190623-tslint-prettier-angular" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/23/20190623-tslint-prettier-angular/" class="article-date">
  <time datetime="2019-06-23T20:23:31.000Z" itemprop="datePublished">2019-06-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Angular/">Angular</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/23/20190623-tslint-prettier-angular/">Code style and best practices enforcement in Angular (TSLint - Prettier)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Every language and framework has its best practices rules to make developer life’s easier and avoid pitfalls. But not <em>‘walking astray from the path’</em> in a manually way is not easy and becomes impossible when multiple developers / teams get involved.</p>
<p>Having a toolbox to enforce these best practices, as automatically as possible is one of the ‘base’ preparations every project should have before even start writing a single line of code. </p>
<p>The web languages and Angular are no exception to this rule and<br>there are various tools doing just that. After searching around and do some testing, here is my personal recommandation for setting up ‘Lint’ and ‘Code formatting’ enforcements.</p>
<h2 id="The-tools"><a href="#The-tools" class="headerlink" title="The tools"></a>The tools</h2><p>The tools proposed here are of two categories: <em>‘CLI based’</em> and <em>‘Editor Plugins / Extensions’</em>.</p>
<p>The CLI tools are part of the project (in <code>package.json</code>). So this means that is easy to be kept in sync and enforced in all developer’s environments and CI/CD deployments.</p>
<p>The editor plugins presented here are for the propular <a href="2od: url here" target="_blank" rel="noopener">VSCode</a> editor (my personal favourite). They help you <em>‘stay in the path’</em> real-time, while you are coding.</p>
<p>The CLI tools:</p>
<ul>
<li><a href="https://palantir.github.io/tslint/" target="_blank" rel="noopener">TSLint</a></li>
<li><a href="http://codelyzer.com/" target="_blank" rel="noopener">codelyzer</a> and <a href="https://github.com/mgechev/tslint-angular/" target="_blank" rel="noopener">tslint-angular</a></li>
<li><a href="https://prettier.io/" target="_blank" rel="noopener">prettier</a> and <a href="https://github.com/prettier/tslint-config-prettier/" target="_blank" rel="noopener">tslint-config-prettier</a></li>
<li><a href="https://github.com/azz/pretty-quick" target="_blank" rel="noopener">pretty-quick</a> and <a href="https://github.com/typicode/husky" target="_blank" rel="noopener">husky</a></li>
</ul>
<p>The VSCode plugins are:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-tslint-plugin" target="_blank" rel="noopener">TSLint</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener">Prettier</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=Angular.ng-template" target="_blank" rel="noopener">Angular Language Service</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=johnpapa.Angular2" target="_blank" rel="noopener">Angular Snippets</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=natewallace.angular2-inline" target="_blank" rel="noopener">angular2-inline</a></li>
</ul>
<h2 id="tslint"><a href="#tslint" class="headerlink" title="tslint"></a>tslint</h2><p><code>tslint</code> is a package that parses your Typescript code looking for points that <em>‘break the best practice rules’</em>. It comes with a pre-configured set of rules for best practices in Typescript in general.</p>
<p>You don’t have to do something to install it. It comes pre-included in any new Angular project you create, when you run <code>ng new</code> command.</p>
<h2 id="codelyzer-and-tslint-angular"><a href="#codelyzer-and-tslint-angular" class="headerlink" title="codelyzer and tslint-angular"></a>codelyzer and tslint-angular</h2><p><code>codelyzer</code> and <code>tslint-angular</code> packages are a set of rules for <code>tslint</code>, and they are enforce Angular-specific best practices including the <a href="https://angular.io/guide/styleguide/" target="_blank" rel="noopener">Angular Style Guide</a>. </p>
<p>You don’t have to install <code>codelyzer</code> as it included with new projects created with <code>ng new</code> command. </p>
<p>To install <code>tslint-angular</code> </p>
<ol>
<li>run <code>npm install --save-dev tslint-angular</code></li>
<li>edit <code>tslint.json</code> to extend the configuration<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-angular&quot;],</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>To run your project against these rules, just run: <code>ng lint</code>.</p>
<h2 id="prettier-and-tslint-config-prettier"><a href="#prettier-and-tslint-config-prettier" class="headerlink" title="prettier and tslint-config-prettier"></a>prettier and tslint-config-prettier</h2><p>Prettier is a tool that enforces code style formatting. It is just concerned with the display format of the code. It has nothing to do code operation and effectiveness checks that <code>tslint</code> performs.</p>
<p>To install it, run: <code>npm install --save-dev prettier</code></p>
<p>You will also want to install <code>tslint-config-prettier</code>. This is an additional rules configuration file that resolves conflicts between <code>prettier</code> and <code>tslint</code>. <code>tslint</code> includes some code formatting rules, that conflict with <code>prettier</code>. So when you <code>prettier</code> you break <code>tslint</code>, and when you fix to conform with <code>tslint</code>, then <code>prettier</code> starts to complain. So the above mentioned configuration file, resolve this conflict once and for all.</p>
<p>To install it </p>
<ol>
<li>run: <code>npm install --save-dev tslint-config-prettier</code>.</li>
<li>edit <code>tslint.js</code> file to apply the config<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;extends&quot;: [&quot;tslint:recommended&quot;, &quot;tslint-angular&quot;, &quot;tslint-config-prettier&quot;],</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>You might want also to override some <code>prettier</code> rules with your own. You can create a <code>.prettierrc</code> file in root folder of your project.<br>Here’s my preferred rules:</p>
<p><strong>.prettierrc</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;tabWidth&quot;: 4,</span><br><span class="line">    &quot;singleQuote&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>You can have look at <a href="https://prettier.io/docs/en/options.html" target="_blank" rel="noopener">Prettier options</a> to see what else can be overriden to your liking.</p>
<p>You might also want to exclude certain files from <code>prettier</code> checks. Just place a <code>.prettierignore</code> configuration file in project’s root folder. Here’s my preferrence:</p>
<p><strong>.prettierignore</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">package.json</span><br><span class="line">package-lock.json</span><br><span class="line">yarn.lock</span><br><span class="line">dist</span><br></pre></td></tr></table></figure></p>
<p>To manually run a prettier, just enter:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx prettier --write &quot;**/*&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>CAUTION:</strong> The <code>--write</code> parameter will directly change your files. Having a clean commit state before you do that it’s a good idea so you can revert any changes that did not work out well (this can happen).</p>
<p>To format only specific file-types of your project, you can run (e.g):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx prettier --write &quot;**/*.&#123;ts, html&#125;&quot;</span><br></pre></td></tr></table></figure></p>
<p>You can also launch it for specific files. e.g.:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx prettier --write &quot;src/app/app.component.ts&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="pretty-quick-and-husky"><a href="#pretty-quick-and-husky" class="headerlink" title="pretty-quick and husky"></a>pretty-quick and husky</h2><p>Having to run <code>tslint</code> and <code>prettier</code> manually each time you wish to commit, is a real burden. And is almost sure that it cannot be effectively enforced just by telling your colleagues to respect the policy and run these tools themselves each time.</p>
<p>That is why we need to enforce these rules automatically, before committing files. Code should be automatically formatted and if it does not follows our best practices, the commit should stop.</p>
<p>Welcome, <code>husky</code> package. It allows you to automatically run your script within git life-cycle hooks like <code>pre-commit</code> and <code>pre-push</code>.</p>
<p>But then again running these checks enforcement on the entire code base each time, is a waste of time, resources. And it messses up commits.</p>
<p>Welcome, <code>pretty-quick</code>:  It identifies which files have changed and allow applying <code>prettier</code> fixes only on those.</p>
<p>So: </p>
<ol>
<li>install <code>pretty-quick</code>: <code>npm install --save-dev pretty-quick</code></li>
<li>install <code>husky</code>: <code>npm install --save-dev husky</code></li>
<li>Configure <code>husky</code> to run before commits. Add the following to <code>package.json</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;husky&quot;: &#123;</span><br><span class="line">    &quot;hooks&quot;: &#123;</span><br><span class="line">        &quot;pre-commit&quot;: &quot;pretty-quick --staged &amp;&amp; ng lint&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>So before each commit:</p>
<ol>
<li><code>prettier</code> will format the changed files automatically re-stage them. </li>
<li>Then <code>ng lint</code> will run. If the code does not comply with the rules, then the commit will be stopped.</li>
</ol>
<p>Otherwise the commit will procced as normal.</p>
<h2 id="VSCode-Plugins"><a href="#VSCode-Plugins" class="headerlink" title="VSCode Plugins"></a>VSCode Plugins</h2><p>As we mentioned earlier, it is much more efficient if you have the above mentioned checkes real-time while you are writing your code.  Fortunately there are corresponding VSCode plugins to do exactly that. Here are my recommendations.</p>
<h3 id="TSLint-and-codelyzer"><a href="#TSLint-and-codelyzer" class="headerlink" title="TSLint and codelyzer."></a><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-tslint-plugin" target="_blank" rel="noopener">TSLint</a> and codelyzer.</h3><p>It performs <code>tslint</code> analysis based on the files you are editing. Just install the plugin and you are set for the <code>tslint</code> part.</p>
<p><a href="https://github.com/mgechev/codelyzer/blob/master/README.md#editor-configuration" target="_blank" rel="noopener">For enabling also the <code>codelyzer</code> rules for VSCode</a>: Open <em>Code &gt; Preferences &gt; User Settings</em>, and enter the following lines:</p>
<p>{<br>  “tslint.rulesDirectory”: “./node_modules/codelyzer”,<br>  “typescript.tsdk”: “node_modules/typescript/lib”<br>}</p>
<h3 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener">Prettier</a></h3><p>It will suggest code format corrections in real-time. It binds to <em>Format Document</em> command of VSCode - Right-click menu in the file contents you are editing - and formats based on your <code>prettier</code> rules the entire document you are working on.</p>
<h3 id="Angular-specific-plugins"><a href="#Angular-specific-plugins" class="headerlink" title="Angular specific plugins"></a>Angular specific plugins</h3><p>The following plugins are Angular specific and they are also <a href="https://johnpapa.net/rec-ng-extensions/" target="_blank" rel="noopener">recommended by Angular guru John Papa</a>.</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=natewallace.angular2-inline" target="_blank" rel="noopener">Angular Inline</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=Angular.ng-template" target="_blank" rel="noopener">Angular Language Service</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=johnpapa.Angular2" target="_blank" rel="noopener">Angular Snippets</a></li>
</ul>
<p>And the following are also a very useful.</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome" target="_blank" rel="noopener">Chrome Debugger</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=pkief.material-icon-theme" target="_blank" rel="noopener">Material Icon Theme</a></li>
</ul>
<h2 id="Closing"><a href="#Closing" class="headerlink" title="Closing"></a>Closing</h2><p>As mentioned above, these are personal recommendations. They are not ‘written in stone’, and I expect some of those to change over time as I bump onto cases that need fine-tunning. I will be updating this post accordingly.</p>
<p>Happy Angular coding !</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/06/23/20190623-tslint-prettier-angular/" data-id="ck1dp35dx00b529vht1qxhf76" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/husky/">husky</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/prettier/">prettier</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tslint/">tslint</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20190611-microsoft-react-cert" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/11/20190611-microsoft-react-cert/" class="article-date">
  <time datetime="2019-06-11T01:03:18.000Z" itemprop="datePublished">2019-06-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Activity/">Activity</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/11/20190611-microsoft-react-cert/">Microsoft &#39;React Router and Redux&#39; certification</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I’m proud to earn the “Microsoft React Router and Redux” <a href="https://courses.edx.org/certificates/65ea020cc8854902a63ad93390af2d65" target="_blank" rel="noopener">certification</a> via <a href="https://www.edx.org/" target="_blank" rel="noopener">edX.org</a>.</p>
<img src="/2019/06/11/20190611-microsoft-react-cert/ms-react-cert.png" title="Photo from editathon">

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/06/11/20190611-microsoft-react-cert/" data-id="ck1dp35aa002m29vh37ehpr10" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-router/">react router</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-redux/">react-redux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redux/">redux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20190611-react-router-cheatsheet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/11/20190611-react-router-cheatsheet/" class="article-date">
  <time datetime="2019-06-11T00:45:27.000Z" itemprop="datePublished">2019-06-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/11/20190611-react-router-cheatsheet/">React router cheatsheet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a cheatsheet for <strong>React Router</strong>. It can also be found in my <a href="https://github.com/killerchip/react-cheatsheet/blob/master/react-router/react-router.md" target="_blank" rel="noopener">React Cheatsheet github project</a>.</p>
<p><img src="https://camo.githubusercontent.com/f63754b8412368e820601967af6dea84312b925b/68747470733a2f2f7265616374747261696e696e672e636f6d2f72656163742d726f757465722f616e64726f69642d6368726f6d652d313434783134342e706e67" alt></p>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react-router-dom</span><br></pre></td></tr></table></figure>
<h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const BasicExample = () =&gt; (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&lt;Link to=&quot;/about&quot;&gt;About&lt;/Link&gt;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&lt;Link to=&quot;/users&quot;&gt;Users&lt;/Link&gt;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;hr/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Route exact path=&quot;/&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line">      &lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line">      &lt;Route path=&quot;/users&quot; component=&#123;Users&#125;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="About-Paths"><a href="#About-Paths" class="headerlink" title="About Paths"></a>About Paths</h2><p><code>&lt;Route path=&quot;/about&quot; component={About}/&gt;</code> means: when in route <code>/about</code> render the <code>About</code> component.</p>
<p><code>path=</code> uses a regex. So <code>path=&quot;/home&quot;</code> will match both <code>http://.../home</code> and <code>http://.../home/123</code></p>
<p>If more than one <code>Routes</code> match a path, all matching routes will be rendered.</p>
<p><strong>Root (/) path</strong></p>
<p>Especially take care about the <code>/</code>  (root) path, as it will match all paths (e.g. it will match also <code>/home</code>, <code>/home/123/</code> etc.). Use <code>exact path=</code> for the root path (or any other path that needs exact match).</p>
<p><strong>Trailing slashes</strong></p>
<p> Trailing slashes on the URL don’t matter on the match. <code>strict path</code> make the trailing slash matter. So:</p>
<ul>
<li><code>strict path=&quot;/home/&quot;</code> will match <code>http://.../home/</code> but not <code>http://.../home</code></li>
<li><code>path=&quot;/home/&quot;</code> will match <code>http://.../home/</code> and <code>http://.../home</code></li>
<li><code>strict path=&quot;/home&quot;</code> will match <code>http://.../home/</code> and <code>http://.../home</code>, anyways</li>
</ul>
<p>A Route component with no path property will always trigger a match and render.</p>
<h2 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h2><p><code>&lt;Link to...&gt;</code> changes the URL path</p>
<p>All Route <code>Component</code>‘s get passed the <code>match</code> prop which contains information on the current URL.</p>
<h2 id="About-Route-render-methods"><a href="#About-Route-render-methods" class="headerlink" title="About Route render methods"></a>About Route render methods</h2><p>Use <code>component=</code> for components. Don’t pass inline functions.</p>
<p>Use <code>render=</code> for inline function.</p>
<p>Use <code>children</code> for components that always will be rendered. Also make sure that you pass inline function here. Using a <code>Route children...</code> path instead of a typical React Component allows the rendered component to get some route information via the props injected by the router.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/about&quot; children=&#123;(props) =&gt; &lt;div&gt;Always rendered&lt;/div&gt;&#125;/&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h2><p>An example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const About = (props) =&gt; &#123;</span><br><span class="line">  console.log(props.match)</span><br><span class="line">  // Object &#123;path: &quot;/about&quot;, url: &quot;/about&quot;, isExact: true, params: Object&#125;</span><br><span class="line"></span><br><span class="line">  console.log(props.location)</span><br><span class="line">  // Object &#123;pathname: &quot;/about&quot;, search: &quot;&quot;, hash: &quot;&quot;, state: undefined&#125;</span><br><span class="line"></span><br><span class="line">  console.log(props.history)</span><br><span class="line">  // Object &#123;length: 1, action: &quot;POP&quot;, location: Object&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Match"><a href="#Match" class="headerlink" title="Match"></a>Match</h3><ul>
<li><p><strong>params</strong> (object) - contains key/value pairs of the dynamic segments that are used in the path pattern (e.g. {userId = 123} when path = “/user/:userId” and the URL is “/user/123”)</p>
</li>
<li><p><strong>isExact</strong> (boolean) - true if the URL is an exact match with the path property.</p>
</li>
<li><p><strong>path</strong> (string) - the path property of the route component. Useful for building nested routes.</p>
</li>
<li><p><strong>url</strong> (string) - the matched portion of the URL. Useful for building nested Links</p>
</li>
</ul>
<p>Note: The match object is null when there is no match.</p>
<h3 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h3><p>A location object is passed down to all components rendered from Route components as a property. The location object contains the following information about the path that was rendered:</p>
<ul>
<li><strong>pathname</strong> (string) - the full path of the URL</li>
<li><strong>search</strong> (string) - the URL query string</li>
<li><strong>hash</strong> (string) - the URL hash fragment</li>
<li><strong>state</strong> (object) - the current state, if a state was provided to history.push(path, [state]), otherwise undefined</li>
</ul>
<h3 id="History"><a href="#History" class="headerlink" title="History"></a>History</h3><p>A history object is passed down to all components rendered from Route components as a property. The history object contains the following information about the path that was rendered:</p>
<ul>
<li><strong>length</strong> (number) - The number of entries in the history stack</li>
<li><strong>action</strong> (string) - (PUSH, POP, or REPLACE)</li>
<li><strong>location</strong> (object) - see location</li>
</ul>
<p>It also has the following methods:</p>
<ul>
<li><strong>push(path, [state])</strong> - (function) Pushes a new entry onto the history</li>
<li><strong>replace(path, [state])</strong> - (function) Replaces the current entry on the history stack</li>
<li><strong>go(n)</strong> - (function) Moves the pointer in the history stack by n entries</li>
<li><strong>goBack()</strong> - (function) Equivalent to go(-1)</li>
<li><strong>goForward()</strong> - (function) Equivalent to go(1)</li>
<li><strong>block(prompt)</strong> - (function) Prevents navigation (see the history docs)</li>
</ul>
<h2 id="Nested-routes"><a href="#Nested-routes" class="headerlink" title="Nested routes"></a>Nested routes</h2><p>It is pretty straight forward to nest Route components within each other. The <code>match.url</code> property is useful if you want to add path segments onto the original matched url. For example, if you want to add additional Route components within a component rendered from an original Route component do the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const Info = (&#123;match&#125;) =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&quot;&#123;match.url + &quot;/telephone&quot;&#125;&quot; render=&#123;(props) =&gt; &lt;div&gt;Phone: 999 999 9999&lt;/div&gt;&#125;/&gt; // renders when URL = /info/phone`</span><br><span class="line"></span><br><span class="line">      &lt;Route path=&quot;&#123;match.url + &quot;/e-mail&quot;&#125;&quot; render=&#123;(props) =&gt; &lt;div&gt;Email: email@example.com&lt;/div&gt;&#125;/&gt; renders when URL = /info/email</span><br><span class="line"></span><br><span class="line">      &lt;Route path=&quot;&#123;match.url + &quot;/strAddress&quot;&#125;&quot; render=&#123;(props) =&gt; &lt;div&gt;Address: 211 Sesame Str&lt;/div&gt;&#125;/&gt; renders when URL = /info/address</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)&#125;</span><br><span class="line"></span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;BrowserRouter&gt;</span><br><span class="line">      &lt;Route path=&quot;/info&quot; component = &#123;Info&#125;/&gt;</span><br><span class="line">    &lt;/BrowserRouter&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>See that nested Route <em>extends</em> the parent url <code>match.url</code>.</p>
<h2 id="NavLinks"><a href="#NavLinks" class="headerlink" title="NavLinks"></a>NavLinks</h2><p>NavLinks are like links but get special CSS classes when they are active:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NavLink to=&quot;/info&quot; activeClassName=&quot;selected&quot;&gt;Info&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure>
<h3 id="activeStyle"><a href="#activeStyle" class="headerlink" title="activeStyle"></a>activeStyle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink to=&quot;/info&quot; activeStyle=&#123;&#123;color:&apos;red&apos;&#125;&#125;&gt;Info&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure>
<h3 id="isActive"><a href="#isActive" class="headerlink" title="isActive"></a>isActive</h3><p>The NavLink component has an isActive property that triggers a function when the NavLink is active.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink to=&quot;/info&quot; isActive=&#123;() =&gt; console.log(&apos;Info router selected))&#125;&gt;Info&lt;/NavLink&gt;</span><br></pre></td></tr></table></figure>
<h3 id="exact"><a href="#exact" class="headerlink" title="exact"></a>exact</h3><p>The NavLink component has an exact property that only lets the NavLink become active when the location is matched exactly.</p>
<h3 id="strict"><a href="#strict" class="headerlink" title="strict"></a>strict</h3><p>The NavLink component has a strict property that causes trailing slashes to be taken into consideration when determining whether the NavLink is active.</p>
<h2 id="Switch-Component"><a href="#Switch-Component" class="headerlink" title="Switch Component"></a>Switch Component</h2><p>It will only render the <strong>first</strong> route that will match.</p>
<p>example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line"> &lt;Route exact path=&quot;/&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line"> &lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line"> &lt;Route path=&quot;/users/:id&quot; component=&#123;User&#125;/&gt;</span><br><span class="line"> &lt;Route component=&#123;DefaultRoute&#125;/&gt; //if no other routes match, this route will render for sure</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="Redirect-component"><a href="#Redirect-component" class="headerlink" title="Redirect component"></a>Redirect component</h1><p>Redirects to URL when rendered. It’s a way to ‘programmatically’ cause redirection.</p>
<p>Typical case is to be used inside other <code>Route</code>s. Redirect on error example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">let validUser = false;</span><br><span class="line"></span><br><span class="line">const ValidateUser = () =&gt; &#123;</span><br><span class="line">    if(validUser)&#123;</span><br><span class="line">        return &lt;div&gt;Welcome User&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        return &lt;Redirect to=&quot;/error&quot;/&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const Login = () =&gt; &#123;</span><br><span class="line">    validUser = true</span><br><span class="line">    return &lt;div&gt;Logged In&lt;/div&gt; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const Error = () =&gt; &#123;</span><br><span class="line">    return &lt;div&gt;Please Log In&lt;/div&gt; </span><br><span class="line">&#125;</span><br><span class="line">&lt;Route exact path=&quot;/user&quot; render=&#123;ValidateUser&#125;/&gt;</span><br><span class="line">&lt;Route exact path=&quot;/error&quot; render=&#123;Error&#125;/&gt;</span><br><span class="line">&lt;Route exact path=&quot;/login&quot; render=&#123;Login&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>Redirects can also be used inside Switches. To use a Redirect within a Switch component, add a from property to the Redirect component. The Switch component will render the first component that matches, whether it is a Route or a Redirect. The from property can be only used with Redirects that are within Switch components.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Route path=&apos;/user&apos; component=&#123;User&#125;/&gt;</span><br><span class="line">  &lt;Redirect exact from=&apos;/&apos; to=&apos;/user&apos;/&gt;</span><br><span class="line">  &lt;Redirect from=&apos;/oldPageURL&apos; to =&apos;/newPageURL&apos;/&gt;</span><br><span class="line">  &lt;Route component=&#123;DefaultPage&#125;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
<p>Example of default root route redirect<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">  &lt;Redirect exact from=&quot;/&quot; to=&quot;/home&quot; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/home&quot; component=&#123;Home&#125; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/about&quot; component=&#123;About&#125; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/users/:id&quot; component=&#123;Users&#125; /&gt;</span><br><span class="line">  &lt;Route path=&quot;/error&quot; component=&#123;Error&#125; /&gt;</span><br><span class="line">  &lt;Route component=&#123;DefaultRoute&#125; /&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="Prompt"><a href="#Prompt" class="headerlink" title="Prompt"></a>Prompt</h1><p>When rendered it watches if you want to leave the current URL path and prompts.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route exact path=&quot;/&quot; component=&#123;Home&#125; /&gt;</span><br><span class="line">&lt;Route path=&quot;/about&quot; component=&#123;About&#125; /&gt;</span><br><span class="line">&lt;Route path=&quot;/users/:id&quot; component=&#123;Users&#125; /&gt;</span><br><span class="line">&lt;Prompt message=&quot;Are you sure you want to leave?&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p><strong>when</strong></p>
<p>The when attribute is a boolean that can be used to enable or disable the Prompt component. Set it to false when you want to disable the Prompt component and allow the user the navigate away without seeing a Prompt. The when attribute is set to true by default.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> var notSaved = true</span><br><span class="line">&lt;Prompt when=&#123;notSaved&#125; message=&quot;Are you sure you want to leave without saving?&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="Example-of-‘subroutes’"><a href="#Example-of-‘subroutes’" class="headerlink" title="Example of ‘subroutes’"></a>Example of ‘subroutes’</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &#123; Link, Switch, Route &#125; from &quot;react-router-dom&quot;;</span><br><span class="line"></span><br><span class="line">const projects = [</span><br><span class="line">    &#123;link: &apos;/game_project&apos;, name: &apos;Game Project&apos;&#125;,</span><br><span class="line">    &#123;link: &apos;/react_project&apos;, name: &apos;React Project&apos;&#125;,</span><br><span class="line">    &#123;link: &apos;/db_project&apos;, name: &apos;Database Project&apos;&#125;,</span><br><span class="line">    &#123;link: &apos;/ml_project&apos;, name: &apos;Machine Learning Project&apos;&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const Projects = (&#123; match &#125;) =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &#123;projects.map (</span><br><span class="line">                project =&gt; (</span><br><span class="line">                    &lt;li&gt;</span><br><span class="line">                        &lt;Link to=&#123;`$&#123;match.url&#125;$&#123;project.link&#125;`&#125;&gt;&#123;project.name&#125;&lt;/Link&gt;</span><br><span class="line">                    &lt;/li&gt;</span><br><span class="line">                )</span><br><span class="line">            )&#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &lt;Route</span><br><span class="line">                path=&#123;match.url + &apos;/:project_link&apos;&#125;</span><br><span class="line">                render = &#123; (&#123;match&#125;) =&gt; &lt;div&gt;&#123;match.params.project_link&#125;&lt;/div&gt;&#125;</span><br><span class="line">            /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;Route exact path=&#123;match.url&#125; render=&#123;() =&gt; &lt;div&gt;Pick a Project to view!&lt;/div&gt;&#125; /&gt;å</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default Projects;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/06/11/20190611-react-router-cheatsheet/" data-id="ck1dp35dy00b629vh3c1nyrn0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-router/">react router</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20190216-meteor-role-based-routing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/16/20190216-meteor-role-based-routing/" class="article-date">
  <time datetime="2019-02-16T14:04:12.000Z" itemprop="datePublished">2019-02-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Meteor/">Meteor</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/16/20190216-meteor-role-based-routing/">MeteorJS - Role Based Routing example</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/killerchip/meteor-cheatsheet/blob/master/subprojects/role-based-routing/readme.md" target="_blank" rel="noopener">This is a sample project / guide</a> on setting up a Meteor app with top level routing based on the role of the user.</p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>The app based on the following concepts.</p>
<ul>
<li>Users can be ‘normal’ users, or can have an <code>admin</code> role.</li>
<li>The app has top level parts (routes).<ul>
<li>Public area: Can be accessed by anyone, in order to authenticate</li>
<li>App area: This is the normal usage of the app that can be used both types of users.</li>
<li>Admin Portal area: This area should be accessible only by users with <code>admin</code> role.</li>
</ul>
</li>
<li>In addition:<ul>
<li>Public area is available both on web and cordova platforms</li>
<li>Admin Portal is availble only in Web platform. <code>admin</code> users that login in Cordova environment are redirected to App area.</li>
<li>App area is only available on Cordova platform. If any user tries to access it on Web, the user is redirected to a ‘block’ page.</li>
</ul>
</li>
</ul>
<p>The app can be adapted to switch various other cases, like adding more roles or removing the above restrictions.</p>
<h2 id="Packages-used"><a href="#Packages-used" class="headerlink" title="Packages used"></a>Packages used</h2><p>The app is based on the following <code>atmosphere.js</code> packages.</p>
<ul>
<li><code>alanning:roles</code> for managing roles of users</li>
<li><code>kadira:flow-router</code> for routing.</li>
</ul>
<p>It is based on <em>React</em> but it can easily be adapted to <em>Blaze</em> templates.</p>
<h2 id="Router-init-after-subscriptions-complete"><a href="#Router-init-after-subscriptions-complete" class="headerlink" title="Router init after subscriptions complete"></a>Router init after subscriptions complete</h2><p>A basic concept that it demonstrates is how to ‘stall’ the router initialization until the needed subscriptions are finished. This is because we need specific information fetched from database before making a routing decision.</p>
<p>In the example below, the router initialization waits for 3 subscriptions to finish.</p>
<ul>
<li>The <code>me</code> subscription: It fetches our full <em>user document</em> with all necessary fields.</li>
<li>The <code>Roles.subscription</code>: This subscription is created by the <code>alanning:roles</code> package. In this case is not necessary since we have the <code>me</code> subscription. It is put here as demo. In only the <code>roles</code> field is needed to make routing decision, the <code>me</code> subscription can be skipped.</li>
<li>The <code>companies</code> subscription: This demonstrates the case were there is need for other subscriptions needed for the routing decision. Again it is put here as demo, because it is not actually used in the routing decision.</li>
</ul>
<p>Finally before the router is initialized, a check is performed in case it already has been initialized.</p>
<p><strong>routes.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">FlowRouter.wait();</span><br><span class="line"></span><br><span class="line">Tracker.autorun(() =&gt; &#123;</span><br><span class="line">    const mesub = Meteor.subscribe(&apos;me&apos;);</span><br><span class="line">    const companiesSubscription = Meteor.subscribe(&apos;companies&apos;);</span><br><span class="line"></span><br><span class="line">    const shouldInitializeRouter =</span><br><span class="line">        mesub.ready() &amp;&amp;</span><br><span class="line">        Roles.subscription.ready() &amp;&amp;</span><br><span class="line">        companiesSubscription.ready() &amp;&amp;</span><br><span class="line">        !FlowRouter._initialized; // eslint-disable-line no-underscore-dangle</span><br><span class="line"></span><br><span class="line">    if (shouldInitializeRouter) &#123;</span><br><span class="line">        FlowRouter.initialize();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="The-top-level-areas"><a href="#The-top-level-areas" class="headerlink" title="The top-level areas"></a>The top-level areas</h2><p>We app is ‘partitioned’ in 3 areas.</p>
<ul>
<li>Public Area: which will contain pages accessible by unauthenticated users. In this example, it has only one route. It is the <code>/login</code> which renders the Login page.</li>
<li>App area (<code>/app</code>): This area offers the App’s functionality for normal users.</li>
<li>Admin area (<code>/admin</code>): This area is the Admin Portal of the app. It should be accessible only by users with <code>admin</code> role.</li>
</ul>
<p>These areas are translated in routes definitions as <em>FlowRouter</em> <code>groups</code>.</p>
<p><strong>routes.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const publicRoutes = FlowRouter.group(&#123;</span><br><span class="line">    name: &apos;publicRoutes&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const appRoutes = FlowRouter.group(&#123;</span><br><span class="line">    prefix: &apos;/app&apos;,</span><br><span class="line">    name: &apos;appRoutes&apos;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const adminRoutes = FlowRouter.group(&#123;</span><br><span class="line">    prefix: &apos;/admin&apos;,</span><br><span class="line">    name: &apos;adminRoutes&apos;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>And the corresponding routes (only one page per area in this demo.)</p>
<p><strong>routes.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">publicRoutes.route(&apos;/login&apos;, &#123;</span><br><span class="line">    action() &#123;</span><br><span class="line">        mount(LoginPage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">appRoutes.route(&apos;/&apos;, &#123;</span><br><span class="line">    action() &#123;</span><br><span class="line">        mount(DummyPage, &#123; title: &apos;App for Users&apos; &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">adminRoutes.route(&apos;/&apos;, &#123;</span><br><span class="line">    action() &#123;</span><br><span class="line">        mount(DummyPage, &#123; title: &apos;Portal for Admins&apos; &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="The-root-‘-‘-path"><a href="#The-root-‘-‘-path" class="headerlink" title="The root ‘/‘ path"></a>The root ‘/‘ path</h1><p>The app’s entry point will be the root (<code>/</code>) path. So this path is not part of any <code>group</code> (or area). Is it used for entry point decision. It lands the user on the proper area based on the user’s authentication status and role.</p>
<p><strong>router.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FlowRouter.route(&apos;/&apos;, &#123;</span><br><span class="line">    action() &#123;</span><br><span class="line">        FlowRouter.go(getRouteBasedOnRole());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>role-routing.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">export const getRouteBasedOnRole = () =&gt; &#123;</span><br><span class="line">    const user = Meteor.user();</span><br><span class="line"></span><br><span class="line">    // land unauthenticated users on login page</span><br><span class="line">    if (!user) &#123;</span><br><span class="line">        return &apos;/login&apos;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // land Admins on Admin Portal</span><br><span class="line">    if (Roles.userIsInRole(user, ROLES.ADMIN)) &#123;</span><br><span class="line">        return &apos;/admin&apos;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // No ROLE means normal user. Land on App area</span><br><span class="line">    return &apos;/app&apos;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="Route-Guards"><a href="#Route-Guards" class="headerlink" title="Route Guards"></a>Route Guards</h2><p>So the app’s entry will land user normally. But in case of web, user can directly enter the URL paths to land on. Protection is needed on pages from unauthorized access (authentication status and roles) and not-supported access (area app vs platform; remember that certain parts of the app should be available only on specific platforms).</p>
<p>The approach here is to write <em>guard</em> functions that will check specific conditions and block access to the route, by redirecting to the user elsewhere.</p>
<p>These functions will be bound to route <code>groups</code> by using the <code>triggersEnter</code> hooks of <em>FlowRouter</em>.</p>
<p>One <em>guard</em> function per case is created and then it is ‘hooked’ into the necessary routes group. Care must be taken in the order in which the <em>guards</em> are applied. It is important for delivering the guarding logic (review again the requirements at the start of this document).</p>
<p>If all the <em>guards</em> are executed and no <code>redirect</code> happens, then the route will be entered.</p>
<p>So the route groups now become:</p>
<p><strong>routes.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const appRoutes = FlowRouter.group(&#123;</span><br><span class="line">    prefix: &apos;/app&apos;,</span><br><span class="line">    name: &apos;appRoutes&apos;,</span><br><span class="line">    triggersEnter: [authGuard, blockAppUsageInWeb]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const adminRoutes = FlowRouter.group(&#123;</span><br><span class="line">    prefix: &apos;/admin&apos;,</span><br><span class="line">    name: &apos;adminRoutes&apos;,</span><br><span class="line">    triggersEnter: [authGuard, adminRoleGuard, blockAdminPortalInCordova]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="The-route-guards-in-detail"><a href="#The-route-guards-in-detail" class="headerlink" title="The route guards in detail"></a>The route guards in detail</h3><p>The <code>triggersEnter</code> hooks are calling the <em>guard</em> functions with two parameters.</p>
<ul>
<li><code>context</code> which contains the current route properties</li>
<li><code>redirect</code>. A function that can be used to redirect the browser to a new route.</li>
</ul>
<p>Notice, that when a user is ‘kicked out’ of a route, the user is <code>redirected</code> to root route (<code>/</code>) so the proper routing decision is taken. This way the routing logic does not have to be implemented in each <em>guard</em>. Care must be taken though, so no ‘loops’ are created.</p>
<p><strong><em>authGuard</em></strong></p>
<p>If the user is not authenticated, is kicked out of the route<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export const authGuard = (context, redirect) =&gt; &#123;</span><br><span class="line">    if (!Meteor.userId()) &#123;</span><br><span class="line">        redirect(&apos;/&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong><em>adminRoleGuard</em></strong></p>
<p>If the user has not the <code>admin</code> role, is kicked out of the route.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export const adminRoleGuard = (context, redirect) =&gt; &#123;</span><br><span class="line">    const user = Meteor.user();</span><br><span class="line"></span><br><span class="line">    if (!Roles.userIsInRole(user, ROLES.ADMIN)) &#123;</span><br><span class="line">        redirect(&apos;/&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p><strong><em>blockAdminPortalInCordova</em></strong></p>
<p>This <em>guard</em> is used in Admin Portal group and after the user has been evaluated for the <code>admin</code> role. So if the <code>admin</code> user is in mobile platform, then redirect to App area, in order to use the app as normal user.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export const blockAdminPortalInCordova = (context, redirect) =&gt; &#123;</span><br><span class="line">    if (Meteor.isCordova) &#123;</span><br><span class="line">        redirect(&apos;/app&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>Note: The user is not redirected to <code>/</code> because the root logic will land him again in this area.</p>
<p><strong><em>blockAppAreaInWeb</em></strong></p>
<p>This <em>guard</em> is used in App area. If the platform is web, the user is not allowed to use. The user is not redirected to <code>/</code> because the logic will land him again here. Thus the user is redirected in a ‘block’ page, to be informed that the usage is not allowed in web-platform.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export const blockAppAreaInWeb = (context, redirect) =&gt; &#123;</span><br><span class="line">    // App (as normal user) is not allowed in Web</span><br><span class="line">    if (!Meteor.isCordova) &#123;</span><br><span class="line">        redirect(&apos;/ban-access&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2019/02/16/20190216-meteor-role-based-routing/" data-id="ck1dp35cv00ae29vho45pqjdx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flow-router/">flow-router</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/meteor/">meteor</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2018-12-29-Meteor-react-f7-integration" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/29/2018-12-29-Meteor-react-f7-integration/" class="article-date">
  <time datetime="2018-12-29T09:26:37.000Z" itemprop="datePublished">2018-12-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/29/2018-12-29-Meteor-react-f7-integration/">Meteor + React + F7 Integration Guide</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/killerchip/meteor-react-f7" target="_blank" rel="noopener">https://github.com/killerchip/meteor-react-f7</a></p>
<p>This is project is both a <strong>starter</strong> template and an <strong>integration guide</strong>, for <a href="https://guide.meteor.com/" target="_blank" rel="noopener">Meteor-React</a> with <a href="https://framework7.io/react/" target="_blank" rel="noopener">Framework7-React</a>.</p>
<p>In addition it incldues a preconfigured setup of ESLint and Prettier, for code quality and code style enforcement in your codebase.</p>
<ul>
<li><p><strong>Meteor</strong> is a full-stack framework for building web and hybrid mobile (web-based) apps, which supports <strong>React</strong> as its templating solution for front-end. On top of that you can use </p>
</li>
<li><p><strong>Framework7</strong> to give your mobile apps a close to native look and feel.</p>
</li>
</ul>
<h2 id="How-to-use-this-project"><a href="#How-to-use-this-project" class="headerlink" title="How to use this project"></a>How to use this project</h2><p>You can directly clone the project and start working on it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/killerchip/meteor-react-f7.git</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">meteor run</span><br><span class="line">meteor run android-device</span><br><span class="line">meteor run ios-device</span><br></pre></td></tr></table></figure>
<h2 id="Manual-integration-and-explanation"><a href="#Manual-integration-and-explanation" class="headerlink" title="Manual integration and explanation"></a>Manual integration and explanation</h2><p>If you want to manually build this project, here are the steps taken:</p>
<h3 id="Create-a-meteor-project-using-CLI"><a href="#Create-a-meteor-project-using-CLI" class="headerlink" title="Create a meteor project using CLI"></a>Create a meteor project using CLI</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor create --react &lt;my-project&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Add-necessary-Headers-in-the-project"><a href="#Add-necessary-Headers-in-the-project" class="headerlink" title="Add necessary Headers in the project"></a>Add necessary Headers in the project</h3><p><em>client/main.hml</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;meteor-react-f7&lt;/title&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure></p>
<p>You need to add the <code>viewport</code> meta tag to make the app responsive and display correctly in mobile device.</p>
<h3 id="Adding-ESLint-and-Prettier"><a href="#Adding-ESLint-and-Prettier" class="headerlink" title="Adding ESLint and Prettier"></a>Adding ESLint and Prettier</h3><p><strong>ESLint</strong> will suggest best practices for Javascript, Meteor, and React.</p>
<p><strong>Prettier</strong> will suggest a unified code style (display) to make it easier to read.</p>
<p><strong>Husky</strong> will enforce those rules upon commiting changes.</p>
<p>For more details you can refer to the following Posts:</p>
<ul>
<li><a href="http://killerchip.net/2018/08/20/2018-08-20-meteor-react-eslint/">ESlint configuration on Meteor-React project</a></li>
<li><a href="http://killerchip.net/2018/09/22/2018-09-22-prettier-config/">Setting up Prettier along ESlint</a></li>
</ul>
<p>An overview of steps are the following:</p>
<p>Install the necessary packages:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">meteor npm install --save-dev babel-eslint eslint-config-airbnb eslint-plugin-import eslint-plugin-meteor eslint-plugin-react eslint-plugin-jsx-a11y eslint-import-resolver-meteor eslint @meteorjs/eslint-config-meteor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">meteor npm install --save-dev --save-exact prettier</span><br><span class="line"></span><br><span class="line">meteor npm install --save-dev eslint-plugin-prettier eslint-config-prettier</span><br></pre></td></tr></table></figure></p>
<p>Then make sure the following configuration files are put in your project’s root directory. They are a suggested configuration for those modules.</p>
<ul>
<li><a href="https://github.com/killerchip/meteor-react-f7/blob/master/.eslintrc.json" target="_blank" rel="noopener">.eslintrc.json</a></li>
<li><a href="https://github.com/killerchip/meteor-react-f7/blob/master/.prettierignore" target="_blank" rel="noopener">.prettierignore</a></li>
<li><a href="https://github.com/killerchip/meteor-react-f7/blob/master/.prettierrc.json" target="_blank" rel="noopener">.prettierrc.json</a></li>
</ul>
<p>Finally put the following scripts in <code>package.json</code>, to be able to use these tools from command-line.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scripts: &#123;</span><br><span class="line">    &quot;lint&quot;: &quot;node_modules/.bin/eslint . --ext .js,.jsx&quot;,</span><br><span class="line">    &quot;pretty&quot;: &quot;node_modules/.bin/prettier &apos;./**/*.&#123;js,jsx,scss&#125;&apos;&quot;,</span><br><span class="line">    &quot;pretty:write&quot;: &quot;node_modules/.bin/prettier --write &apos;./**/*.&#123;js,jsx,scss&#125;&apos;&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Add the following in the <code>pacakge.json</code> file to allow automatically prettier fixes when you commit your code.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;husky&quot;: &#123;</span><br><span class="line">  &quot;hooks&quot;: &#123;</span><br><span class="line">    &quot;pre-commit&quot;: &quot;precise-commits --no-verify&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>My personal preference is to do manual edits with my VSCode plugin.</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener">https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode</a></p>
<h3 id="Framework7-Integration"><a href="#Framework7-Integration" class="headerlink" title="Framework7 Integration"></a>Framework7 Integration</h3><p>Install the following F7 packages.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meteor npm install framework7 framework7-react</span><br></pre></td></tr></table></figure>
<p>According to <a href="https://framework7.io/react/init-app.html" target="_blank" rel="noopener">documentation</a>, you must initialize Framework7.</p>
<p><em>client/main.jsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import Framework7 from &apos;framework7&apos;;</span><br><span class="line">import Framework7React from &apos;framework7-react&apos;;</span><br><span class="line"></span><br><span class="line">Framework7.use(Framework7React);</span><br></pre></td></tr></table></figure></p>
<p>Also the Framework7 CSS must be imported. In case of Meteor app the easiest way to do it is just to import it in a file, and the Meteor builder will bundle it in the <code>app.html</code> file.</p>
<p><em>client/main.jsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &apos;../node_modules/framework7/css/framework7.min.css&apos;;</span><br></pre></td></tr></table></figure></p>
<p>Now you need to initialize the <code>App</code> component of framework7. So rename the default <code>App</code> React component to something else (e.g. <code>Root</code>).</p>
<p><em>client/main.jsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import Root from &apos;/imports/ui/Root.jsx&apos;;</span><br><span class="line"> </span><br><span class="line">Meteor.startup(() =&gt; &#123;</span><br><span class="line">    render(&lt;Root /&gt;, document.getElementById(&apos;react-target&apos;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>And in the newly renamed <code>Root.jsx</code> file, initialize the framework7 App component.</p>
<p><em>imports/ui/Root.jsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import Hello from &apos;./Hello.jsx&apos;;</span><br><span class="line">import Info from &apos;./Info.jsx&apos;;</span><br><span class="line"></span><br><span class="line">/* globals App, View, Page, Navbar */</span><br><span class="line"></span><br><span class="line">const Root = () =&gt; (</span><br><span class="line">    &lt;App</span><br><span class="line">        params=&#123;&#123;</span><br><span class="line">            name: &apos;Meteor React F7&apos;,</span><br><span class="line">            id: &apos;net.killerchip.meteor-react-f7&apos;,</span><br><span class="line">            statusbar: &#123;</span><br><span class="line">                androidBackgroundColor: &apos;#FFF&apos;,</span><br><span class="line">                iosBackgroundColor: &apos;#FFF&apos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">        &lt;View main&gt;</span><br><span class="line">            &lt;Page&gt;</span><br><span class="line">                &lt;Navbar title=&quot;MeteorJS - React - F7&quot; /&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;h1&gt;Welcome to Meteor!&lt;/h1&gt;</span><br><span class="line">                    &lt;Hello /&gt;</span><br><span class="line">                    &lt;Info /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/Page&gt;</span><br><span class="line">        &lt;/View&gt;</span><br><span class="line">    &lt;/App&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default Root;</span><br></pre></td></tr></table></figure></p>
<p>Framework7’s components are included by Meteor’s builder in the bundle itself. So you can’t (actually you should not) <code>import</code> the framework7 react components (e.g. <code>App</code>, <code>View</code>, etc.). But because ESLint will complain, you can use the <code>/*  globals */</code> directive to declare them. Consider them as a replacement for <code>import</code> statements for these components.</p>
<p>Finally a <code>cordova-plugin-statusbar</code> is added, and the correspoing <code>App</code> options to set its background color.</p>
<p><em>imports/ui/Root.jsx</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">statusbar: &#123;</span><br><span class="line">    androidBackgroundColor: &apos;#FFF&apos;,</span><br><span class="line">    iosBackgroundColor: &apos;#FFF&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://killerchip.net/2018/12/29/2018-12-29-Meteor-react-f7-integration/" data-id="ck1dp35a8002k29vhlhf5hlnj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/framework7/">framework7</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/meteor/">meteor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Activity/">Activity</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Development/">Development</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Development/Layout/">Layout</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/">Angular</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/Bootstrap/">Bootstrap</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/Dependency-Injection/">Dependency Injection</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/ReactiveX/">ReactiveX</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/Redux/">Redux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/Routing/">Routing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/ngx-model/">ngx-model</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Cordova/">Cordova</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/">HTML5</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/Bootstrap/">Bootstrap</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML5/Responsive/">Responsive</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hybrid-Mobile/">Hybrid Mobile</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Hybrid-Mobile/Ionic/">Ionic</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Internationalization/">Internationalization</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Internationalization/Angular/">Angular</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IoT/">IoT</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IoT/Raspberry-Pi/">Raspberry Pi</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Meteor/">Meteor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Meteor/React/">React</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Meteor/React/ESLint/">ESLint</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React-Native/">React-Native</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/React-Native/Redux/">Redux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/React-Native/Redux/Typescript/">Typescript</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReactiveX/">ReactiveX</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ReactiveX/RxJS/">RxJS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ReactiveX/RxJS/Angular/">Angular</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/State-Machines/">State Machines</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Typescript/">Typescript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Typescript/Angular/">Angular</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Static-Site-Generators/">Static Site Generators</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Static-Site-Generators/Hexo/">Hexo</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/react/react-native/">react-native</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/react-native/">react-native</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/react-native/typescript/">typescript</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI/">AI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-volume/">Android volume</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cordova/">Cordova</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dotin/">Dotin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github-Pages/">Github Pages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Internationalization/">Internationalization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ionic/">Ionic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ionic-DevApp/">Ionic DevApp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Localization/">Localization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React-Native/">React-Native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Static-Site-Generators/">Static Site Generators</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Udacity/">Udacity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-basics/">android basics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/artificial-intelligence/">artificial intelligence</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure-iot/">azure iot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootstrap/">bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dependency-injection/">dependency injection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/developer-conference/">developer conference</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/di/">di</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/directives/">directives</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event-propagation/">event propagation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flow-router/">flow-router</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/forms/">forms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/framework7/">framework7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/">grid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/guide/">guide</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/husky/">husky</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i18n/">i18n</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/immutables/">immutables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ionic/">ionic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/">iot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layouts/">layouts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/menu/">menu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meteor/">meteor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mockup/">mockup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/moodle/">moodle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngx-model/">ngx-model</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngx-translate/">ngx-translate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngx-translate-extract/">ngx-translate-extract</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngx-translate-extract-csv/">ngx-translate-extract-csv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/observables/">observables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pet-project/">pet-project</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prettier/">prettier</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberry-pi/">raspberry pi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-router/">react router</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react-native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-redux/">react-redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactivex/">reactivex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux/">redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/responsive/">responsive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/routing/">routing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rxjs/">rxjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/state-machines/">state machines</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tslint/">tslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/udacity/">udacity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/validators/">validators</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/voxxed-days-thessaloniki-2017/">voxxed days thessaloniki 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AI/" style="font-size: 10px;">AI</a> <a href="/tags/Android-volume/" style="font-size: 10px;">Android volume</a> <a href="/tags/Angular/" style="font-size: 15px;">Angular</a> <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Cordova/" style="font-size: 10px;">Cordova</a> <a href="/tags/Dotin/" style="font-size: 10px;">Dotin</a> <a href="/tags/Github-Pages/" style="font-size: 10px;">Github Pages</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Internationalization/" style="font-size: 13.33px;">Internationalization</a> <a href="/tags/Ionic/" style="font-size: 10px;">Ionic</a> <a href="/tags/Ionic-DevApp/" style="font-size: 10px;">Ionic DevApp</a> <a href="/tags/Localization/" style="font-size: 13.33px;">Localization</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/Static-Site-Generators/" style="font-size: 10px;">Static Site Generators</a> <a href="/tags/UML/" style="font-size: 10px;">UML</a> <a href="/tags/Udacity/" style="font-size: 10px;">Udacity</a> <a href="/tags/android/" style="font-size: 13.33px;">android</a> <a href="/tags/android-basics/" style="font-size: 11.67px;">android basics</a> <a href="/tags/angular/" style="font-size: 20px;">angular</a> <a href="/tags/artificial-intelligence/" style="font-size: 10px;">artificial intelligence</a> <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/azure-iot/" style="font-size: 10px;">azure iot</a> <a href="/tags/bootstrap/" style="font-size: 11.67px;">bootstrap</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/dependency-injection/" style="font-size: 10px;">dependency injection</a> <a href="/tags/developer-conference/" style="font-size: 10px;">developer conference</a> <a href="/tags/di/" style="font-size: 10px;">di</a> <a href="/tags/directives/" style="font-size: 10px;">directives</a> <a href="/tags/eslint/" style="font-size: 11.67px;">eslint</a> <a href="/tags/event-propagation/" style="font-size: 10px;">event propagation</a> <a href="/tags/flow-router/" style="font-size: 10px;">flow-router</a> <a href="/tags/forms/" style="font-size: 11.67px;">forms</a> <a href="/tags/framework7/" style="font-size: 10px;">framework7</a> <a href="/tags/grid/" style="font-size: 10px;">grid</a> <a href="/tags/guide/" style="font-size: 10px;">guide</a> <a href="/tags/html5/" style="font-size: 16.67px;">html5</a> <a href="/tags/husky/" style="font-size: 10px;">husky</a> <a href="/tags/i18n/" style="font-size: 13.33px;">i18n</a> <a href="/tags/immutables/" style="font-size: 10px;">immutables</a> <a href="/tags/ionic/" style="font-size: 10px;">ionic</a> <a href="/tags/iot/" style="font-size: 10px;">iot</a> <a href="/tags/javascript/" style="font-size: 11.67px;">javascript</a> <a href="/tags/layout/" style="font-size: 10px;">layout</a> <a href="/tags/layouts/" style="font-size: 11.67px;">layouts</a> <a href="/tags/menu/" style="font-size: 10px;">menu</a> <a href="/tags/meteor/" style="font-size: 13.33px;">meteor</a> <a href="/tags/mockup/" style="font-size: 10px;">mockup</a> <a href="/tags/moodle/" style="font-size: 10px;">moodle</a> <a href="/tags/ngx-model/" style="font-size: 10px;">ngx-model</a> <a href="/tags/ngx-translate/" style="font-size: 13.33px;">ngx-translate</a> <a href="/tags/ngx-translate-extract/" style="font-size: 13.33px;">ngx-translate-extract</a> <a href="/tags/ngx-translate-extract-csv/" style="font-size: 13.33px;">ngx-translate-extract-csv</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/observables/" style="font-size: 10px;">observables</a> <a href="/tags/pet-project/" style="font-size: 10px;">pet-project</a> <a href="/tags/prettier/" style="font-size: 13.33px;">prettier</a> <a href="/tags/raspberry-pi/" style="font-size: 10px;">raspberry pi</a> <a href="/tags/react/" style="font-size: 18.33px;">react</a> <a href="/tags/react-router/" style="font-size: 11.67px;">react router</a> <a href="/tags/react-native/" style="font-size: 15px;">react-native</a> <a href="/tags/react-redux/" style="font-size: 10px;">react-redux</a> <a href="/tags/reactivex/" style="font-size: 13.33px;">reactivex</a> <a href="/tags/redux/" style="font-size: 15px;">redux</a> <a href="/tags/responsive/" style="font-size: 11.67px;">responsive</a> <a href="/tags/routing/" style="font-size: 10px;">routing</a> <a href="/tags/rxjs/" style="font-size: 13.33px;">rxjs</a> <a href="/tags/state-machines/" style="font-size: 10px;">state machines</a> <a href="/tags/tslint/" style="font-size: 10px;">tslint</a> <a href="/tags/typescript/" style="font-size: 11.67px;">typescript</a> <a href="/tags/udacity/" style="font-size: 11.67px;">udacity</a> <a href="/tags/validators/" style="font-size: 10px;">validators</a> <a href="/tags/voxxed-days-thessaloniki-2017/" style="font-size: 11.67px;">voxxed days thessaloniki 2017</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/10/05/20191005-kcv-project/">kCV - A React Native project - My CV as Mobile App</a>
          </li>
        
          <li>
            <a href="/2019/09/29/20191029-redux-async/">Handling Asynchronous fetching of data with Redux</a>
          </li>
        
          <li>
            <a href="/2019/09/27/20190927-harvard-rn-cert/">CS50 Mobile App Dev with React Native (Harvard) certification</a>
          </li>
        
          <li>
            <a href="/2019/07/23/2019-07-23-rn-redux-ts/">React-Redux-Typescript guide</a>
          </li>
        
          <li>
            <a href="/2019/07/19/2019-07-19-rn-ts-lint/">React-Native Typescript with ESLint and Prettier</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 killerchip<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>